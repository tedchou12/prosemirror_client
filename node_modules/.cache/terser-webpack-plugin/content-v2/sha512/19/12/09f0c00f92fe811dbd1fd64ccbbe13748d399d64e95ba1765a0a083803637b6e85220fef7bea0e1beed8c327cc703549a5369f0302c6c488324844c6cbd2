{"code":"webpackHotUpdate(\"licit\",{\"./src/ui/ImageUploadEditor.js\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _CustomButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CustomButton */ \"./src/ui/CustomButton.js\");\\n/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LoadingIndicator */ \"./src/ui/LoadingIndicator.js\");\\n/* harmony import */ var _preventEventDefault__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./preventEventDefault */ \"./src/ui/preventEventDefault.js\");\\n/* harmony import */ var _uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./uuid */ \"./src/ui/uuid.js\");\\n/* harmony import */ var _czi_form_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./czi-form.css */ \"./src/ui/czi-form.css\");\\n/* harmony import */ var _czi_form_css__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_czi_form_css__WEBPACK_IMPORTED_MODULE_7__);\\n/* harmony import */ var _czi_image_upload_editor_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./czi-image-upload-editor.css */ \"./src/ui/czi-image-upload-editor.css\");\\n/* harmony import */ var _czi_image_upload_editor_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_czi_image_upload_editor_css__WEBPACK_IMPORTED_MODULE_8__);\\n/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Types */ \"./src/Types.js\");\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nclass ImageUploadEditor extends react__WEBPACK_IMPORTED_MODULE_2__[\"PureComponent\"] {\\n  constructor() {\\n    super(...arguments);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_img\", null);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_unmounted\", false);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"props\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"state\", {\\n      error: null,\\n      id: Object(_uuid__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(),\\n      pending: false\\n    });\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_onSelectFile\", event => {\\n      const file = event.target.files && event.target.files[0];\\n\\n      if (file && typeof file === \\'object\\') {\\n        this._upload(file);\\n      }\\n    });\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_onSuccess\", image => {\\n      if (this._unmounted) {\\n        return;\\n      }\\n\\n      this.props.close(image);\\n    });\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_onError\", error => {\\n      if (this._unmounted) {\\n        return;\\n      }\\n\\n      this.setState({\\n        error,\\n        id: Object(_uuid__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(),\\n        pending: false\\n      });\\n    });\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_upload\", async file => {\\n      try {\\n        const runtime = this.props.runtime || {};\\n        const {\\n          canUploadImage,\\n          uploadImage\\n        } = runtime;\\n\\n        if (!canUploadImage || !uploadImage || !canUploadImage()) {\\n          throw new Error(\\'feature is not available\\');\\n        }\\n\\n        this.setState({\\n          pending: true,\\n          error: null\\n        });\\n        const image = await uploadImage(file);\\n\\n        this._onSuccess(image);\\n      } catch (ex) {\\n        this._onError(ex);\\n      }\\n    });\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_cancel\", () => {\\n      this.props.close();\\n    });\\n  }\\n\\n  componentWillUnmount() {\\n    this._unmounted = true;\\n  }\\n\\n  render() {\\n    const {\\n      id,\\n      error,\\n      pending\\n    } = this.state;\\n    const className = classnames__WEBPACK_IMPORTED_MODULE_1___default()(\\'czi-image-upload-editor\\', {\\n      pending,\\n      error\\n    });\\n    let label = Lang(\\'Choose an image file...\\');\\n\\n    if (pending) {\\n      label = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](_LoadingIndicator__WEBPACK_IMPORTED_MODULE_4__[\"default\"], null);\\n    } else if (error) {\\n      label = \\'Something went wrong, please try again\\';\\n    }\\n\\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\\n      className: className\\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"form\", {\\n      className: \"czi-form\",\\n      onSubmit: _preventEventDefault__WEBPACK_IMPORTED_MODULE_5__[\"default\"]\\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"fieldset\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"legend\", null, Lang(\\'Upload Image\\')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\\n      className: \"czi-image-upload-editor-body\"\\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\\n      className: \"czi-image-upload-editor-label\"\\n    }, label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"input\", {\\n      accept: \"image/png,image/gif,image/jpeg,image/jpg\",\\n      className: \"czi-image-upload-editor-input\",\\n      disabled: pending,\\n      id: id,\\n      key: id,\\n      onChange: this._onSelectFile,\\n      type: \"file\"\\n    }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\\n      className: \"czi-form-buttons\"\\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](_CustomButton__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\\n      label: \"Cancel\",\\n      onClick: this._cancel\\n    }))));\\n  }\\n\\n}\\n\\n/* harmony default export */ __webpack_exports__[\"default\"] = (ImageUploadEditor);\\n\\n\\n\\n//# sourceURL=webpack:///./src/ui/ImageUploadEditor.js?')}});","extractedComments":["/*!*************************************!*\\\n  !*** ./src/ui/ImageUploadEditor.js ***!\n  \\*************************************/","/*! exports provided: default */"]}