{"code":"webpackHotUpdate(\"licit\",{\"./src/client/CollabConnector.js\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prosemirror-transform */ \"./node_modules/prosemirror-transform/dist/index.es.js\");\\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prosemirror-state */ \"./node_modules/prosemirror-state/dist/index.es.js\");\\n/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prosemirror-model */ \"./node_modules/prosemirror-model/dist/index.es.js\");\\n/* harmony import */ var _SimpleConnector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SimpleConnector */ \"./src/client/SimpleConnector.js\");\\n/* harmony import */ var _EditorConnection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./EditorConnection */ \"./src/client/EditorConnection.js\");\\n/* harmony import */ var _Reporter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Reporter */ \"./src/client/Reporter.js\");\\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_7__);\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nclass CollabConnector extends _SimpleConnector__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\\n  constructor(editorState, setState, config) {\\n    super(editorState, setState);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_clientID\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_connected\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_connection\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_docID\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_lang\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_stepKeys\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"_selection\", void 0);\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"onEdit\", transaction => {\\n      if (!this._connection.ready) {\\n        console.warn(\\'not ready\\');\\n        return;\\n      }\\n\\n      react_dom__WEBPACK_IMPORTED_MODULE_7___default.a.unstable_batchedUpdates(() => {\\n        this._connection.dispatch({\\n          type: \\'transaction\\',\\n          transaction\\n        });\\n      });\\n    });\\n\\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"updateSchema\", schema => {\\n      // this._connection.updateSchema(schema);\\n      this._connection.ws_start();\\n    });\\n\\n    const {\\n      docID,\\n      lang\\n    } = config;\\n    this._docID = docID;\\n    this._lang = lang; // [FS][11-MAR-2020]\\n    // Modified the scripts to ensure not to always replace 3001 with 3002 to run both servers together,\\n    // instead used running hostname and configured port.\\n    // const url = window.location.protocol + \\'\\\\/\\\\/\\' +\\n    //   window.location.hostname + \\':3002/docs/\\' +\\n    //   docID;\\n    // const url = window.location.protocol + \\'\\\\/\\\\/\\' + \\'localhost.charlesproxy.com\\' + \\':3002/docs/\\' + docID;\\n\\n    const url = \\'http://localhost.charlesproxy.com/prosemirror_server/server_5/docs/\\' + docID;\\n    this._connection = new _EditorConnection__WEBPACK_IMPORTED_MODULE_5__[\"default\"](setState, new _Reporter__WEBPACK_IMPORTED_MODULE_6__[\"default\"](), docID, lang);\\n    this._connection.view = {\\n      updateState: s => {\\n        // console.log(\\'update\\', s);\\n        //poll if selection changes\\n        // if (this._connection.ready) {\\n        //   if (this._selection != s.selection) {\\n        //     this._selection = s.selection;\\n        //     this._connection.cursor_send(s.selection);\\n        //   }\\n        // }\\n        setState({\\n          editorState: s\\n        }, () => {});\\n      }\\n    };\\n  }\\n\\n}\\n\\n/* harmony default export */ __webpack_exports__[\"default\"] = (CollabConnector);\\n\\n\\n//# sourceURL=webpack:///./src/client/CollabConnector.js?')}});","extractedComments":["/*!***************************************!*\\\n  !*** ./src/client/CollabConnector.js ***!\n  \\***************************************/","/*! exports provided: default */"]}